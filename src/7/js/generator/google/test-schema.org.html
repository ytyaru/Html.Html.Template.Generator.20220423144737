<!--<script src="../../../lib/extensible-custom-error/0.0.7/full.js"></script>-->
<script src="../../../lib/extensible-custom-error/0.0.7/min.js"></script>
<script src="../../../lib/prettier/2.6.2/standalone.js"></script>
<script src="../../../lib/prettier/2.6.2/parser-babel.js"></script>
<script src="schema.org.js"></script>
<script>
class UnitTestError extends ExtensibleCustomError {}
/*
class UnitTestError extends Error {
    constructor(message) {
        super(message);
        this.name = this.constructor.name;
        // V8ã®ã¨ãå¿…è¦
        if (Error.captureStackTrace) { Error.captureStackTrace(this, this.constructor); }
        // ES5ã‚„ãã‚Œä»¥å‰ã®ã¨ãå¿…è¦
        Object.setPrototypeOf(this, new.target.prototype);
    }
}
*/
// å‡ºåŠ›ã•ã‚ŒãŸJSON-LDã¯ä»¥ä¸‹URLã®ãƒªãƒƒãƒãƒªã‚¶ãƒ«ãƒˆã§ãƒãƒªãƒ‡ãƒ¼ãƒˆã™ã‚‹
// https://search.google.com/test/rich-results?hl=ja
// <script type="application/ld+json"><\/script> ã§å›²ã†å¿…è¦ãŒã‚ã‚‹ã€‚
class TestSchemaOrg { // GoogleãŒå¯¾å¿œã—ã¦ã„ã‚‹ã‚‚ã®ã ã‘
    #makeTag(jsonLdStr) { return `<script type="application/ld+json">${this.#prettier(jsonLdStr)}<\/script>`; }
    #prettier(jsonLdStr) { return prettier.format(jsonLdStr, {
        parser: 'json',
        plugins: prettierPlugins,
    })}
    testBreadcrumbList() { // OK! è­¦å‘Šã‚‚ãªã—ã€‚ã ãŒãƒ—ãƒ¬ãƒ“ãƒ¥ãƒ¼ã§ããªã‹ã£ãŸã€‚
        const data = new Map()
        data.set('ğŸ ', 'https://example.com/index.html')
        data.set('éšå±¤1', 'https://example.com/category1/index.html')
        data.set('éšå±¤2', '')
        const jsonLd = SchemaOrg.BreadcrumbList(data).generate()
        console.log(this.#makeTag(jsonLd))
    }
    testFaqPage() { // OK! ãƒ—ãƒ¬ãƒ“ãƒ¥ãƒ¼ã‚‚ã§ããŸãŒä¸Šã‹ã‚‰é †ã«2ä»¶ã—ã‹è¡¨ç¤ºã•ã‚Œãªã‹ã£ãŸã€‚
        const data = new Map()
        data.set('ã“ã‚Œã¯ã‚ˆãã‚ã‚‹è³ªå•ã§ã™ã‹ï¼Ÿ', 'ã¯ã„ã€ãã†ã§ã™ã€‚')
        data.set('ã“ã‚Œã¯ã©ã‚“ãªå½¢å¼ã®ãƒ‡ãƒ¼ã‚¿ã§ä½œã‚‰ã‚Œã¾ã—ãŸã‹ï¼Ÿ', 'JSON-LDå½¢å¼ã§ã™ã€‚schema.orgã®ã†ã¡Googleã®å®šç¾©ã«å¾“ã£ãŸãƒ—ãƒ­ãƒ‘ãƒ†ã‚£ã‚’ä½¿ç”¨ã—ã¾ã—ãŸã€‚')
        data.set('ã“ã‚Œã¯ãƒãƒªãƒ‡ãƒ¼ãƒˆãƒã‚§ãƒƒã‚¯ã—ã¾ã—ãŸã‹ï¼Ÿ', 'ã¯ã„ã€‚<a href="https://search.google.com/test/rich-results?hl=ja">ãƒªãƒƒãƒãƒªã‚¶ãƒ«ãƒˆ</a>ã§æ­£ã—ã„æ›¸å¼ã§ã‚ã‚‹ã“ã¨ã‚’ç¢ºèªã—ã¾ã—ãŸã€‚')
        const jsonLd = SchemaOrg.FaqPage(data).generate()
        console.log(this.#makeTag(jsonLd))
    }
    testSimpleQuiz() { // OKã ãŒè­¦å‘Šã‚ã‚Šï¼ˆä»»æ„é …ç›®18ä»¶æœªå…¥åŠ›ï¼‰
        const title = 'ã‚¯ã‚¤ã‚ºã§ã™'
        const question = 'ãƒ‘ãƒ³ã¯ãƒ‘ãƒ³ã§ã‚‚é£Ÿã¹ã‚‰ã‚Œãªã„ãƒ‘ãƒ³ã¯ï¼Ÿ'
        const answer = 'ãƒ•ãƒ©ã‚¤ãƒ‘ãƒ³'
        const suggests = ['ã—ã¾ãƒ‘ãƒ³', 'ãƒãƒ³ã‚®ã‚¹ãƒ‘ãƒ³']
        const jsonLd = SchemaOrg.SimpleQuiz(title, question, answer, suggests).generate()
        console.log(this.#makeTag(jsonLd))
    }
    testSimpleQuizWithComment() { // OKã ãŒè­¦å‘Šã‚ã‚Šï¼ˆä»»æ„é …ç›®15ä»¶æœªå…¥åŠ›ï¼‰
        const title = 'ã‚¯ã‚¤ã‚ºã§ã™'
        const question = 'ãƒ‘ãƒ³ã¯ãƒ‘ãƒ³ã§ã‚‚é£Ÿã¹ã‚‰ã‚Œãªã„ãƒ‘ãƒ³ã¯ï¼Ÿ'
        const answer = ['ãƒ•ãƒ©ã‚¤ãƒ‘ãƒ³', 'å›ºãã¦é£Ÿã¹ã‚‰ã‚Œãªã„ã‚ˆï¼']
        const suggests = [['ã—ã¾ãƒ‘ãƒ³', 'ãã®ç­‹ã®äººãªã‚‰é£Ÿã¹ã‚‰ã‚Œã¾ã™ã€‚'], ['ãƒãƒ³ã‚®ã‚¹ãƒ‘ãƒ³', 'æœ‰åãªé£Ÿã¹ç‰©ã§ã™ã€‚çŸ¥ã‚‰ãªã„ã‚“ã§ã™ã‹ï¼Ÿ']]
        const jsonLd = SchemaOrg.SimpleQuiz(title, question, answer, suggests).generate()
        console.log(this.#makeTag(jsonLd))
    }
    testSimpleQuizes() { // OKã ãŒè­¦å‘Šã‚ã‚Šï¼ˆä»»æ„é …ç›®35ä»¶æœªå…¥åŠ›ï¼‰
        const title = 'ã‚¯ã‚¤ã‚ºã§ã™'
        const questions = []
        questions.push({
            question: 'ãƒ‘ãƒ³ã¯ãƒ‘ãƒ³ã§ã‚‚é£Ÿã¹ã‚‰ã‚Œãªã„ãƒ‘ãƒ³ã¯ï¼Ÿ',
            answer: 'ãƒ•ãƒ©ã‚¤ãƒ‘ãƒ³',
            suggests: ['ã—ã¾ãƒ‘ãƒ³', 'ãƒãƒ³ã‚®ã‚¹ãƒ‘ãƒ³'],
        })
        questions.push({
            question: 'ï¼‘ï¼‹ï¼‘ã¯ï¼Ÿ',
            answer: 'ç”°',
            suggests: ['ï¼’', 'ï¼“'],
        }) 
        const jsonLd = SchemaOrg.SimpleQuizes(title, questions).generate()
        console.log(this.#makeTag(jsonLd))
    }
    testSimpleQuizesWithComment() { // OKã ãŒè­¦å‘Šã‚ã‚Šï¼ˆä»»æ„é …ç›®29ä»¶æœªå…¥åŠ›ï¼‰
        const title = 'ã‚¯ã‚¤ã‚ºã§ã™'
        const questions = []
        questions.push({
            question: 'ãƒ‘ãƒ³ã¯ãƒ‘ãƒ³ã§ã‚‚é£Ÿã¹ã‚‰ã‚Œãªã„ãƒ‘ãƒ³ã¯ï¼Ÿ',
            answer: ['ãƒ•ãƒ©ã‚¤ãƒ‘ãƒ³', 'å›ºãã¦é£Ÿã¹ã‚‰ã‚Œãªã„ã‚ˆï¼'],
            suggests: [['ã—ã¾ãƒ‘ãƒ³', 'ãã®ç­‹ã®äººãªã‚‰é£Ÿã¹ã‚‰ã‚Œã¾ã™ã€‚'], ['ãƒãƒ³ã‚®ã‚¹ãƒ‘ãƒ³', 'æœ‰åãªé£Ÿã¹ç‰©ã§ã™ã€‚çŸ¥ã‚‰ãªã„ã‚“ã§ã™ã‹ï¼Ÿ']],
        })
        questions.push({
            question: 'ï¼‘ï¼‹ï¼‘ã¯ï¼Ÿ',
            answer: ['ç”°', '1+1ã«=ã®ç·šã‚’ãã‚Œãã‚Œä¸Šä¸‹ã«é…ç½®ã™ã‚‹ã¨ç”°ã«ãªã‚‹ã€‚'],
            suggests: [['ï¼’', 'ç®—æ•°ã¨ã—ã¦ã¯æ­£è§£ã§ã™ãŒã‚¯ã‚¤ã‚ºã¨ã—ã¦ã¯ä¸æ­£è§£ã§ã™ã€‚'], ['ï¼“', 'ã‚¯ã‚¤ã‚ºã¨ã—ã¦ã‚‚ç®—æ•°ã¨ã—ã¦ã‚‚ä¸æ­£è§£ã§ã™ã€‚']],
        }) 
        const jsonLd = SchemaOrg.SimpleQuizes(title, questions).generate()
        console.log(this.#makeTag(jsonLd))
    }
    testHowTo1Minimum() { // OKã ãŒè­¦å‘Šã‚ã‚Šï¼ˆä»»æ„é …ç›®29ä»¶æœªå…¥åŠ›ï¼‰
        const jsonLd = SchemaOrg.HowTo('ãƒ©ã‚ºãƒ‘ã‚¤ã®èµ·å‹•æ–¹æ³•', ['ACã‚¢ãƒ€ãƒ—ã‚¿ã‚’ã‚³ãƒ³ã‚»ãƒ³ãƒˆã«æŒ¿ã™ã€‚']).generate()
        console.log(this.#makeTag(jsonLd))
    }
    testHowTo1MultiStep() { // OKã§ãƒ—ãƒ¬ãƒ“ãƒ¥ãƒ¼ç¢ºèªã§ããŸãŒè­¦å‘Šã‚ã‚Šï¼ˆä»»æ„é …ç›®12ä»¶æœªå…¥åŠ›ï¼‰
        const jsonLd = SchemaOrg.HowTo('ãƒ©ã‚ºãƒ‘ã‚¤ã®èµ·å‹•æ–¹æ³•', ['ACã‚¢ãƒ€ãƒ—ã‚¿ã‚’ã‚³ãƒ³ã‚»ãƒ³ãƒˆã«æŒ¿ã™ã€‚', 'é›»æºã‚¹ã‚¤ãƒƒãƒã‚’å…¥ã‚Œã‚‹ã€‚', 'ãƒ–ãƒ¼ãƒˆå®Œäº†ã‚’å¾…ã¤ã€‚']).generate()
        console.log(this.#makeTag(jsonLd))
    }
    testHowTo1Options() { // OKã§ãƒ—ãƒ¬ãƒ“ãƒ¥ãƒ¼ç¢ºèªã§ããŸãŒã‚ªãƒ—ã‚·ãƒ§ãƒ³é …ç›®ãŒè¡¨ç¤ºã•ã‚Œãªã‹ã£ãŸã€‚è­¦å‘Šã‚ã‚Šï¼ˆä»»æ„é …ç›®12ä»¶æœªå…¥åŠ›ï¼‰
        const jsonLd = SchemaOrg.HowTo('ãƒ©ã‚ºãƒ‘ã‚¤ã®èµ·å‹•æ–¹æ³•', 
            ['ACã‚¢ãƒ€ãƒ—ã‚¿ã‚’ã‚³ãƒ³ã‚»ãƒ³ãƒˆã«æŒ¿ã™ã€‚', 'é›»æºã‚¹ã‚¤ãƒƒãƒã‚’å…¥ã‚Œã‚‹ã€‚', 'ãƒ–ãƒ¼ãƒˆå®Œäº†ã‚’å¾…ã¤ã€‚'],
            {
                image: 'https://a.png',
                totalTime: 'P2D3H4M5S',
                estimatedCost: SchemaOrg.MonetaryAmount(123),
            }
        ).generate()
        console.log(this.#makeTag(jsonLd))
    }
    testMonetaryAmountMinimum() {
        const money = SchemaOrg.MonetaryAmount(123)
        console.assert(money['@type'] === 'MonetaryAmount')
        console.assert(money.value === 123)
        console.assert(money.currency === 'JPY')
    }
    testMonetaryAmountUSD() {
        const money = SchemaOrg.MonetaryAmount(234.5, 'USD')
        console.assert(money['@type'] === 'MonetaryAmount')
        console.assert(money.value === 234.5)
        console.assert(money.currency === 'USD')
    }
    testHowToToolError() {
        try { SchemaOrg.HowToTool({}); }
        catch (e) {
            if (!(e instanceof SchemaOrgParameterError)) { throw new UnitTestError(`ã‚¨ãƒ©ãƒ¼ã®å‹ã¯SchemaOrgParameterErrorã§ã‚ã‚‹ã¹ãã§ã™ã€‚: ${e.constructor.name}`); }
            if ('HowToToolã®å¼•æ•°optionã«ã¯nameã‚­ãƒ¼ã¨å€¤ãŒå¿…é ˆã§ã™ã€‚' !== e.message) { throw new UnitTestError(`ã‚¨ãƒ©ãƒ¼ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ã¯ã€ŒHowToToolã®å¼•æ•°optionã«ã¯nameã‚­ãƒ¼ã¨å€¤ãŒå¿…é ˆã§ã™ã€‚ã€ã§ã‚ã‚‹ã¹ãã§ã™ã€‚: ${e.message}`); }
        }
    }
    testHowToSupplyError() {
        try { SchemaOrg.HowToSupply({}); }
        catch (e) {
            if (!(e instanceof SchemaOrgParameterError)) { throw new UnitTestError(`ã‚¨ãƒ©ãƒ¼ã®å‹ã¯SchemaOrgParameterErrorã§ã‚ã‚‹ã¹ãã§ã™ã€‚: ${e.constructor.name}`); }
            if ('HowToSupplyã®å¼•æ•°optionã«ã¯nameã‚­ãƒ¼ã¨å€¤ãŒå¿…é ˆã§ã™ã€‚' !== e.message) { throw new UnitTestError(`ã‚¨ãƒ©ãƒ¼ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ã¯ã€ŒHowToSupplyã®å¼•æ•°optionã«ã¯nameã‚­ãƒ¼ã¨å€¤ãŒå¿…é ˆã§ã™ã€‚ã€ã§ã‚ã‚‹ã¹ãã§ã™ã€‚: ${e.message}`); }
        }
    }
    testHowToToolMinimum() {
        const expected = 'ãƒ‰ãƒ©ã‚¤ãƒãƒ¼ï¼ˆï¼‹ï¼‰'
        const tool = SchemaOrg.HowToTool({name: expected});
        console.assert(expected === tool.name)
    }
    testHowToToolWithImage() {
        const name = 'ãƒ‰ãƒ©ã‚¤ãƒãƒ¼ï¼ˆï¼‹ï¼‰'
        const image = 'https://a.png'
        const tool = SchemaOrg.HowToTool({name: name, image: image});
        console.assert(name === tool.name)
        console.assert(image === tool.image)
    }
    testHowToSupplyMinimum() {
        const expected = 'ãƒ‰ãƒ©ã‚¤ãƒãƒ¼ï¼ˆï¼‹ï¼‰'
        const supply = SchemaOrg.HowToSupply({name: expected});
        console.assert(expected === supply.name)
    }
    testHowToSupplyWithImage() {
        const name = 'ãƒ‰ãƒ©ã‚¤ãƒãƒ¼ï¼ˆï¼‹ï¼‰'
        const image = 'https://a.png'
        const supply = SchemaOrg.HowToSupply({name: name, image: image});
        console.assert(name === supply.name)
        console.assert(image === supply.image)
    }
    /*
    testHowTo1OptionsSupplyTool() { // OKã§ãƒ—ãƒ¬ãƒ“ãƒ¥ãƒ¼ç¢ºèªã§ããŸãŒã‚ªãƒ—ã‚·ãƒ§ãƒ³é …ç›®ãŒè¡¨ç¤ºã•ã‚Œãªã‹ã£ãŸã€‚è­¦å‘Šã‚ã‚Šï¼ˆä»»æ„é …ç›®12ä»¶æœªå…¥åŠ›ï¼‰
        const jsonLd = SchemaOrg.HowTo('ãƒ©ã‚ºãƒ‘ã‚¤ã®èµ·å‹•æ–¹æ³•', 
            ['ACã‚¢ãƒ€ãƒ—ã‚¿ã‚’ã‚³ãƒ³ã‚»ãƒ³ãƒˆã«æŒ¿ã™ã€‚', 'é›»æºã‚¹ã‚¤ãƒƒãƒã‚’å…¥ã‚Œã‚‹ã€‚', 'ãƒ–ãƒ¼ãƒˆå®Œäº†ã‚’å¾…ã¤ã€‚'],
            {
                image: 'https://a.png',
                totalTime: 'P2D3H4M5S',
                estimatedCost: SchemaOrg.MonetaryAmount(123),
                supply: HowToSupplies
                tool: 
            }
        ).generate()
        console.log(this.#makeTag(jsonLd))
    }
    testHowTo2Minimum() { // OKã ãŒè­¦å‘Šã‚ã‚Šï¼ˆä»»æ„é …ç›®29ä»¶æœªå…¥åŠ›ï¼‰
        const jsonLd = SchemaOrg.HowTo('ãƒ©ã‚ºãƒ‘ã‚¤ã®èµ·å‹•æ–¹æ³•', ['ACã‚¢ãƒ€ãƒ—ã‚¿ã‚’ã‚³ãƒ³ã‚»ãƒ³ãƒˆã«æŒ¿ã™ã€‚']).generate()
        console.log(this.#makeTag(jsonLd))
    }
    */
}
const test = new TestSchemaOrg() 
test.testBreadcrumbList()
test.testFaqPage()
test.testSimpleQuiz()
test.testSimpleQuizWithComment()
test.testSimpleQuizes()
test.testSimpleQuizesWithComment()
test.testHowTo1Minimum()
test.testHowTo1MultiStep()
test.testHowTo1Options()
test.testMonetaryAmountMinimum()
test.testMonetaryAmountUSD()
test.testHowToToolError()
test.testHowToSupplyError()
test.testHowToToolMinimum()
test.testHowToToolWithImage()
test.testHowToSupplyMinimum()
test.testHowToSupplyWithImage()
</script>
</script>
